#!/usr/bin/env node

'use strict';

if (!process.argv || process.argv.length < 3) {
  console.log('Usage: aerofly-fetch <URL> [FILE]');
  console.log('');
  console.log('Copy METAR information from URL into Aerofly FS2 configuration file.');
  console.log('For more information on METAR APIs see https://api.checkwx.com/metar/kpie/decoded.');
  process.exit(0);
}


const args = {
  url: process.argv[2],
  destination: process.argv[3] || 'main.mcf'
};

const metarObject   = require('../lib/metar-parser')(args.metar);
const aeroflyObject = require('../lib/metar-aerofly')(metarObject);
const aeroflyWriter = require('../lib/aerofly-writer')(args.destination, aeroflyObject);

console.log(aeroflyWriter.output());
